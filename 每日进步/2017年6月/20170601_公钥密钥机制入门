# 公钥密钥机制

## 什么是公钥私钥机制
公钥和私钥是成对出现的，公钥公开，私钥不公开。
### 当别人只想发送信息给我时，我如何确保只有我能查看结果。
> 过程就是：我把公钥发给对方，对方用我的公钥加密，我用自己的私钥解密。
> 这种情况下，其他人不知道我的私钥，就无法解密信息。

> 加密：通过加密算法和公钥对内容(或者说明文)进行加密，得到密文。加密过程需要用到公钥。

> 解密：通过解密算法和私钥对密文进行解密，得到明文。解密过程需要用到解密算法和私钥。

> 由公钥加密的内容，只能由私钥进行解密，也就是说，由公钥加密的内容，如果不知道私钥，是无法解密的。

### 当我想对外公布信息时，对方如何确保信息是我发送的。
> 过程就是：我用私钥加密一段信息，对方用公钥解密信息，尽管公钥公开导致所有人都能查看信息，但是能确保信息是用我的私钥加密的，也就是来自我的。

## RSA公钥加密算法的基本数学原理
**将两个大素数相乘十分容易，但要对乘积因式分解极其困难**

随机选择两个互质的数字，p,q相乘得n，然后根据p和q计算欧拉函数值w，再在1和w之间随机选择一个e，使e和w互质，最后计算e对w的模反元素d。

这样就得到了六个数字：

> 1. p
2. q
3. n
4. w
5. e
6. d

其中n和e组成公钥，n和d组成私钥。想要破解私钥，就需要在知道n和e的情况下反推出d。
所以，反过来，要知道d就需要知道e和w，要知道w就需要知道p和q。因为知道n，但根据n=p*q求p和q几乎不可能（根据原理），所以几乎不可能算出w，所以该加密方法是可靠的。

## 什么是证书？

证书是权威机构颁发的，用于认证用户信息的凭证，一旦认证成功，对信息发送者和接收者而言，就是可信的。

1. 作为信息的接收者，如果我用的公钥被别人替换了，那么信息仍能够正常解密，但是解密出的信息就可能是第三方冒充发给我的。

2. 为了避免第三方冒充的情况发生，我在接收信息前，要求信息发送者向证书中心注册数字证书。

3. 信息发送者向证书中心提供其公钥和其它信息，证书中心用自己的私钥加密这些信息，形成数字证书并颁发给信息发送者。

4. 信息发送者向信息接收者发送证书和加密信息

5. 信息接收者用证书的公钥解开数字证书，就拿到了发送者的公钥，然后用公钥解密信息，就得到了真正的信息。

** 在这个过程中，认证中心必须是权威的，这样，在最后一步，信息接收者才会相信拿到手的发送者的公钥是肯定是发送者的。**
